{"version":3,"sources":["js/src/habit.jsx"],"names":[],"mappings":";;;;AAEA,CAAC,YAAY;AACZ,KAAM,MAAM,GAAG,SAAT,MAAM,CAAI,GAAG,EAAE,GAAG,EAAK;AAC5B,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC;AACjC,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC;AACjC,MAAI,KAAK,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;AACzC,MAAI,KAAK,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;AAC1B,MAAI,KAAK,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;AAC3B,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AAC9C,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AAC9C,SAAO,CAAC,GAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;EAC9B,CAAC;;AAEF,KAAM,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC;;;AACrC,QAAM,EAAA,kBAAG;AACR,OAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;;AAE1G,UACC;;MAAK,SAAS,EAAC,YAAY;;IAE1B;;OAAK,SAAS,EAAC,OAAO;KACrB;;QAAM,SAAS,EAAC,MAAM;MAAE,WAAW,CAAC,IAAI;MAAQ;KAC3C;IACD,CACL;GACF;EACD,CAAC,CAAC;;AAEH,KAAM,cAAc,GAAG,KAAK,CAAC,WAAW,CAAC;;;AACxC,QAAM,EAAA,kBAAG;AAAE,UAAQ;;MAAM,SAAS,EAAC,OAAO;;IAAM,IAAI,CAAC,KAAK,CAAC,KAAK;IAAQ,CAAE;GAAE;EAC5E,CAAC,CAAC;;AAEH,KAAM,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC;;;AACrC,QAAM,EAAA,kBAAG;AAAE,UAAQ;;MAAM,SAAS,EAAC,cAAc;IAAE,IAAI,CAAC,KAAK,CAAC,IAAI;IAAQ,CAAE;GAAE;EAC9E,CAAC,CAAC;;AAEH,KAAM,UAAU,GAAG,KAAK,CAAC,WAAW,CAAC;;;AACpC,QAAM,EAAA,kBAAG;AACR,OAAM,MAAM,GAAG;AACd,QAAI,EAAE,aAAa;AACnB,SAAK,EAAE,YAAY;AACnB,QAAI,EAAE,YAAY;IAClB,CAAC;AACF,OAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC1C,UACC;;MAAK,SAAS,EAAC,aAAa;IAC3B,2BAAG,SAAS,EAAE,SAAS,AAAC,GAAK;IACxB,CACL;GACF;EACD,CAAC,CAAC;;AAEH,KAAM,OAAO,GAAG,KAAK,CAAC,WAAW,CAAC;;;AACjC,QAAM,EAAA,kBAAG;AACR,OAAM,KAAK,GAAG,EAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,AAAC,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAE,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC;AACtF,OAAM,OAAO,GAAG,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;AAC3C,UACC;;;IACC,oBAAC,UAAU,IAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,AAAC,GAAG;IACrC;;OAAK,SAAS,EAAC,UAAU;KACxB,6BAAK,SAAS,EAAE,OAAO,AAAC,EAAC,KAAK,EAAE,KAAK,AAAC,GAAO;KAC7C;;QAAM,SAAS,EAAC,MAAM;MACpB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,EAAE;;MAAK,IAAI,CAAC,KAAK,CAAC,GAAG;MAC5C;KACF;IACD,CACL;GACF;EACD,CAAC,CAAC;;AAEH,KAAM,KAAK,GAAG,KAAK,CAAC,WAAW,CAAC;;;AAC/B,UAAQ,EAAA,kBAAC,GAAG,EAAE,EAAE,EAAE;;;AACjB,UAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC1B,QAAK,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE;AACpB,WAAO,EAAE;AACR,iBAAY,EAAE,WAAW,CAAC,GAAG;AAC7B,gBAAW,EAAE,WAAW,CAAC,GAAG;KAC5B;AACD,SAAK,EAAE,KAAK;IACZ,CAAC,CACD,IAAI,CAAC,UAAC,IAAI;WAAK,MAAK,QAAQ,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;IAAA,CAAC,SACxC,CAAC,UAAC,CAAC,EAAE,IAAI,EAAK;AACnB,WAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACf,WAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAClB,CAAC,CAAC;GACH;AACD,iBAAe,EAAA,2BAAG;AACjB,UAAO;AACN,QAAI,EAAE;AACL,UAAK,EAAE,EAAE;AACT,WAAM,EAAE,EAAE;AACV,WAAM,EAAE,EAAE;AACV,UAAK,EAAE;AACN,QAAE,EAAE,CAAC;AACL,QAAE,EAAE,CAAC;AACL,SAAG,EAAE,CAAC;AACN,SAAG,EAAE,CAAC;AACN,eAAS,EAAE,CAAC;AACZ,WAAK,EAAE,CAAC;AACR,iBAAW,EAAE,CAAC;MACd;AACD,YAAO,EAAE;AACR,UAAI,EAAE,IAAI;MACV;KACD;IACD,CAAC;GACF;AACD,mBAAiB,EAAA,6BAAG;AACnB,UAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AACvB,OAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;;GAE9B;AACD,QAAM,EAAA,kBAAG;AACR,UACC;;MAAK,SAAS,EAAC,OAAO;IACrB;;OAAK,SAAS,EAAC,cAAc;KAC5B,oBAAC,WAAW,IAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,AAAC,GAAG;KACnD,oBAAC,cAAc,IAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,AAAC,GAAG;KAC/C;IACN,oBAAC,OAAO,IAAC,IAAI,EAAC,IAAI,EAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,AAAC,EAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,AAAC,GAAG;IAChG,oBAAC,OAAO,IAAC,IAAI,EAAC,KAAK,EAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,AAAC,EAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,AAAC,GAAG;IACpG,oBAAC,OAAO,IAAC,IAAI,EAAC,IAAI,EAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,AAAC,EAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,AAAC,GAAG;IAC5F,oBAAC,WAAW,IAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,AAAC,EAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,AAAC,GAAG;IAC1E,CACL;GACF;EACD,CAAC,CAAC;;;AAGH,MAAK,CAAC,MAAM,CACX,oBAAC,KAAK,IAAC,GAAG,EAAC,sCAAsC,GAAG,EACpD,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CACvC,CAAC;CACF,CAAA,EAAG,CAAC","file":"js/src/habit.jsx","sourcesContent":["\n// Create scope\n(function () {\n\tconst byDate = (el1, el2) => {\n\t\tconst h1len = el1.history.length;\n\t\tconst h2len = el2.history.length;\n\t\tif (h1len === 0 && h2len === 0) return 0;\n\t\tif (h1len === 0) return 1;\n\t\tif (h2len === 0) return -1;\n\t\tconst a = new Date(el1.history[h1len-1].date);\n\t\tconst b = new Date(el2.history[h2len-1].date);\n\t\treturn a>b ? -1 : a<b ? 1 : 0;\n\t};\n\n\tconst LatestHabit = React.createClass({\n\t\trender() {\n\t\t\tconst latestHabit = this.props.habits.concat(this.props.dailys).sort(byDate)[0] || { text: 'Loading...' };\n\t\t\t// if (latestHabit) console.log(latestHabit.history[latestHabit.history.length-1].date);\n\t\t\treturn (\n\t\t\t\t<div className=\"habit-list\">\n\t\t\t\t\tLatest task completed:\n\t\t\t\t\t<div className=\"habit\">\n\t\t\t\t\t\t<span className=\"name\">{latestHabit.text}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t});\n\n\tconst LevelIndicator = React.createClass({\n\t\trender() { return (<span className=\"level\">Lvl {this.props.level}</span>); }\n\t});\n\n\tconst ProfileName = React.createClass({\n\t\trender() { return (<span className=\"profile-name\">{this.props.name}</span>); }\n\t});\n\n\tconst GlyphLabel = React.createClass({\n\t\trender() {\n\t\t\tconst glyphs = {\n\t\t\t\t\"hp\": \"fa fa-heart\",\n\t\t\t\t\"exp\": \"fa fa-star\",\n\t\t\t\t\"mp\": \"fa fa-fire\"\n\t\t\t};\n\t\t\tconst thisGlyph = glyphs[this.props.type];\n\t\t\treturn (\n\t\t\t\t<div className=\"glyph-label\">\n\t\t\t\t\t<i className={thisGlyph}></i>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t});\n\n\tconst StatBar = React.createClass({\n\t\trender() {\n\t\t\tconst style = {width: Math.floor((this.props.statValue / this.props.max)*100) + '%' };\n\t\t\tconst classes = \"meter \" + this.props.name;\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<GlyphLabel type={this.props.name} />\n\t\t\t\t\t<div className=\"stat-bar\">\n\t\t\t\t\t\t<div className={classes} style={style}></div>\n\t\t\t\t\t\t<span className=\"text\">\n\t\t\t\t\t\t\t{this.props.statValue.toFixed()} / {this.props.max}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t});\n\n\tconst Habit = React.createClass({\n\t\tloadData(url, cb) {\n\t\t\tconsole.log('loading...');\n\t\t\tqwest.get(url, null, {\n\t\t\t\theaders: {\n\t\t\t\t\t'x-api-user': habitConfig.uid,\n\t\t\t\t\t'x-api-key': habitConfig.key\n\t\t\t\t},\n\t\t\t\tcache: false\n\t\t\t})\n\t\t\t.then((data) => this.setState({ data: data }))\n\t\t\t.catch((e, data) => {\n\t\t\t\tconsole.log(e);\n\t\t\t\tconsole.log(data);\n\t\t\t});\n\t\t},\n\t\tgetInitialState() {\n\t\t\treturn { \n\t\t\t\tdata: {\n\t\t\t\t\ttodos: [],\n\t\t\t\t\thabits: [],\n\t\t\t\t\tdailys: [],\n\t\t\t\t\tstats: {\n\t\t\t\t\t\thp: 0,\n\t\t\t\t\t\tmp: 0,\n\t\t\t\t\t\texp: 0,\n\t\t\t\t\t\tlvl: 0,\n\t\t\t\t\t\tmaxHealth: 0,\n\t\t\t\t\t\tmaxMP: 0,\n\t\t\t\t\t\ttoNextLevel: 0\n\t\t\t\t\t},\n\t\t\t\t\tprofile: { \n\t\t\t\t\t\tname: null \n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t};\n\t\t},\n\t\tcomponentDidMount() {\n\t\t\tconsole.log('mounted');\n\t\t\tthis.loadData(this.props.url);\n\t\t\t// setInterval(function () { this.loadData(this.props.url); }.bind(this), this.props.interval);\n\t\t},\n\t\trender() {\n\t\t\treturn (\n\t\t\t\t<div className=\"panel\">\n\t\t\t\t\t<div className=\"profile-info\">\n\t\t\t\t\t\t<ProfileName name={this.state.data.profile.name} />\n\t\t\t\t\t\t<LevelIndicator level={this.state.data.stats.lvl} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<StatBar name=\"hp\" statValue={this.state.data.stats.hp} max={this.state.data.stats.maxHealth} />\n\t\t\t\t\t<StatBar name=\"exp\" statValue={this.state.data.stats.exp} max={this.state.data.stats.toNextLevel} />\n\t\t\t\t\t<StatBar name=\"mp\" statValue={this.state.data.stats.mp} max={this.state.data.stats.maxMP} />\n\t\t\t\t\t<LatestHabit habits={this.state.data.habits} dailys={this.state.data.dailys} />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t});\n\n\t// Render our parent component\n\tReact.render(\n\t\t<Habit url=\"https://habitrpg.com:443/api/v2/user\" />,\n\t\tdocument.getElementById('habit-widget')\n\t);\n})();"]}